## Memepad

Токены на TON называются жетонами. Каждый жетон создается с помощью мастер-контракта (минтер-контракт, jetton-master, jetton-minter). Мастер-контракт позволяет минтить жетоны, т.е. получать n-ое количество данного токена. Также для каждого пользовательского кошелька существует жетон-кошелек (jetton-wallet), который хранит информацию о том, сколько у пользователя жетонов.

В мастер-контракте хранится метадата токен (описание https://github.com/ton-blockchain/TEPs/blob/master/text/0064-token-data-standard.md#jetton-metadata-attributes), т.е. изображение, описание, символ токена и т.д. Пример:

```json
{
    "name": "Huebel Bolt",
    "description": "Official token of the Huebel Company",
    "symbol": "BOLT",
    "decimals": 9,
    "image_data": "https://link.com/image/jetton.png"
}
```

1. В случае с мемпадом, юзер вводит название, описание, символ и загружает изображение. После того, как он нажал кнопку создать токен, вы сохраняете на сервере json-файл, как на примере сверху, и предоставляете к нему доступ по URL (также изображение сохраняете на серваке, чтобы получилась ссылка, как в поле image_data).

Есть специальный смарт-контракт launch (contracts/launch/launch.fc), который предназначен для создания жетонов. Пользователь отправляет 3 тона на этот контракт, потом этот контракт создает новый мастер-контракт жетона, который потом и используется для покупок и продаж.

2. Юзер подключает кошелек на фронте по TonConnect, после подключения вы отправляете ему специальную транзакцию с body, представленным ниже, на адрес контракта launch. В этой транзакции он отправляет тоны, если сумма меньше 3 тон, то транзакция вернет ошибку, если больше, то на остаток закупятся жетоны:

```
beginCell()
    .storeUint(0x79b757f5, 32)
    .storeUint(0, 64)
    .storeRef(
        beginCell()
            .storeUint(1, 8)
            .storeStringTail(contentUrl)
        .endCell()
    ) // contentUrl - ссылка на метаданные жетона (url-путь к json-файлу)
    .storeAddress(authorAddress) // адрес кошелька этого пользователя
.endCell()
```

Launch-контракт деплоит мастер-контракт для нового жетона. После этого можно совершать покупки/продажи этого токена.

3. После этого открываются торги на мемпаде, и пользователи могут купить или продать жетон.

Для покупки используется body:

```
beginCell()
    .storeUint(0x6117d13b, 32)
    .storeUint(0, 64)
.endCell()
```

Пользователь вводит тоны на фронте, вы создаете транзакцию с body, представленным выше, на адрес мастер-контракта жетона.
0.05 TON уходит на исполнения покупки в коде контракта. Также и для продажи.

Для продажи используется body:

```
beginCell()
    .storeUint(0x9b9ed07d, 32)
    .storeUint(0, 64)
    .storeCoins(amount) // количество жетонов, которые пользователь хочет продать
.endCell()
```

Пользователь вводит количество жетонов, которые хочет продать, все упаковывается в транзакцию и отправляется на жетон-кошелек пользователя.

После достижения собранных 1500 тон, торги закрываются и токен автоматически деплоится на бирже STON.fi.
Также после завершения торгов пользователи должны разблокировать свои жетон-кошельки. Для этого совершается транзакция с body и 0.5 TON, представленном ниже, и отправленной на адрес жетон-кошелька:

```
beginCell()
    .storeUint(0xe3b6c66f, 32)
    .storeUint(0, 64)
.endCell()
```

## Деплой контрактов

Для деплоя всех контрактов используются скрипты (scripts/). Для запуска скрипта устанавливается все npm-зависимости, вводите команду в терминале

```bash
npx blueprint run
```

и выбираете скрипт, который хотите запустить. Далее, выбираете сеть (testnet - это сеть, предназначенная для тестирования контрактов), выбираете способ подключения кошелька (выбирайте TonConnect), подключаете через приложения кошелька по QR-коду и в вашем кошельке появится транзакция для подтверждения транзакции.

Для деплоя контракта launch используется скрипт deployLaunch (scripts/deployLaunch.ts, в этом файле можете настроить все параметры для контракта).
Остальные контракты деплоятся автоматически.

## GET-методы

Для получения данных из контракта используются get-методы, который не используют газ для их вызова.

У BcJettonMinter есть несколько гет-методов, с помощью которых можно получить курс для токенов: get_coin_price, get_coins_for_tons, get_tons_for_coins. В файле wrappers/BcJettonMinter.ts есть методы класса для соответствующего гет-метода.

Для вызова этих методов на бэкенде можно использовать либо API (например, TON API), либо через TON-либы под TS.
